import uuid
from dataclasses import dataclass, field
from datetime import date
from typing import List, Optional
from decimal import Decimal
from faker import Faker

fake = Faker()

@dataclass
class EmployeeMock:
    id: uuid.UUID
    full_name: str
    email: str
    job_title: str
    department: str
    hire_date: date
    salary: Decimal
    is_active: bool
    skills: List[str]
    remote_work: bool

@dataclass
class UserProfileMock:
    id: uuid.UUID
    username: str
    bio: str
    avatar_url: str
    preferences: dict

def generate_employee(**overrides) -> EmployeeMock:
    """
    Generates a realistic employee record.
    Args:
        **overrides: Key-value pairs to enforce specific field values.
    """
    profile = fake.profile()
    
    defaults = {
        "id": uuid.uuid4(),
        "full_name": profile["name"],
        "email": profile["mail"],
        "job_title": fake.job(),
        "department": fake.random_element(elements=("IT", "HR", "Sales", "Logistics", "Management")),
        "hire_date": fake.date_between(start_date="-5y", end_date="today"),
        "salary": Decimal(fake.random_int(min=3000, max=15000)),
        "is_active": fake.boolean(chance_of_getting_true=90),
        "skills": fake.words(nb=fake.random_int(min=2, max=5), unique=True),
        "remote_work": fake.boolean()
    }
    
    # Merge defaults with overrides
    data = {**defaults, **overrides}
    return EmployeeMock(**data)

def generate_user_profile(**overrides) -> UserProfileMock:
    defaults = {
        "id": uuid.uuid4(),
        "username": fake.user_name(),
        "bio": fake.sentence(nb_words=10),
        "avatar_url": fake.image_url(width=100, height=100),
        "preferences": {
            "theme": fake.random_element(["dark", "light"]),
            "notifications": fake.boolean()
        }
    }
    data = {**defaults, **overrides}
    return UserProfileMock(**data)