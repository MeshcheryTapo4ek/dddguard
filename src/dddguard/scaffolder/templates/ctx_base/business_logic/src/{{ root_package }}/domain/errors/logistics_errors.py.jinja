from uuid import UUID
from typing import Any

class LogisticsDomainError(Exception):
    """Base exception for all logistics business rule violations."""
    pass


# --- Order Errors ---

class OrderError(LogisticsDomainError):
    """Base class for Order-related errors."""
    pass

class OrderModificationError(OrderError):
    """Raised when trying to modify an order in a locked state."""
    def __init__(self, order_id: UUID, current_status: str):
        self.order_id = order_id
        self.current_status = current_status
        super().__init__(
            f"Order {order_id} cannot be modified in status '{current_status}'."
        )

class EmptyOrderAssemblyError(OrderError):
    """Raised when trying to assemble an empty order."""
    def __init__(self, order_id: UUID):
        self.order_id = order_id
        super().__init__(f"Order {order_id} cannot be assembled because it is empty.")


# --- Courier Errors ---

class CourierError(LogisticsDomainError):
    """Base class for Courier-related errors."""
    pass

class CourierBusyError(CourierError):
    """Raised when trying to assign a job to a busy courier."""
    def __init__(self, courier_id: UUID):
        self.courier_id = courier_id
        super().__init__(f"Courier {courier_id} is already busy.")


# --- Delivery Errors ---

class DeliveryError(LogisticsDomainError):
    """Base class for Delivery-related errors."""
    pass

class InvalidDeliveryStateError(DeliveryError):
    """Raised when an operation is invalid for the current delivery status."""
    def __init__(self, delivery_id: UUID, current_status: str, operation: str):
        self.delivery_id = delivery_id
        self.current_status = current_status
        self.operation = operation
        super().__init__(
            f"Cannot perform '{operation}' on Delivery {delivery_id} "
            f"because it is in status '{current_status}'."
        )

class DeliveryCompletenessError(DeliveryError):
    """Raised when trying to complete a delivery that isn't ready."""
    def __init__(self, delivery_id: UUID, reason: str):
        self.delivery_id = delivery_id
        super().__init__(f"Delivery {delivery_id} cannot be completed: {reason}")