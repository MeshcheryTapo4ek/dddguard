---
scaffolding: add

# --- 1. Imports ---
domain_imports:
  - AssignmentPolicy
  - PricingService
  - OrderMatchingService

# Classes imported from .app (Use Cases, Queries, Workflows, Handlers)
app_imports:
  - CreateOrderUseCase
  - AddOrderItemUseCase
  - AssembleOrderUseCase
  - MatchOrdersUseCase
  - FulfillmentWorkflow
  - GetDeliveryStatusQuery
  - OnOrderCreatedHandler

# Interfaces imported from .app.interfaces (Ports)
port_imports:
  - ILogisticsRepository
  - INotificationGateway

# --- 2. Providers ---
domain_providers_code: |
    @provide
    def provide_assignment_policy(self) -> AssignmentPolicy:
        return AssignmentPolicy()

    @provide
    def provide_pricing_service(self) -> PricingService:
        return PricingService()

    @provide
    def provide_matching_service(
        self, 
        policy: AssignmentPolicy, 
        pricing: PricingService
    ) -> OrderMatchingService:
        return OrderMatchingService(
            assignment_policy=policy, 
            pricing_service=pricing
        )

app_providers_code: |
    # --- Use Cases ---
    @provide
    def provide_create_order_uc(self, repo: ILogisticsRepository) -> CreateOrderUseCase:
        return CreateOrderUseCase(repo=repo)

    @provide
    def provide_add_item_uc(self, repo: ILogisticsRepository) -> AddOrderItemUseCase:
        return AddOrderItemUseCase(repo=repo)

    @provide
    def provide_assemble_uc(self, repo: ILogisticsRepository) -> AssembleOrderUseCase:
        return AssembleOrderUseCase(repo=repo)

    @provide
    def provide_match_orders_uc(
        self, 
        repo: ILogisticsRepository, 
        service: OrderMatchingService
    ) -> MatchOrdersUseCase:
        return MatchOrdersUseCase(repo=repo, matching_service=service)

    # --- Queries ---
    @provide
    def provide_get_status_query(self, repo: ILogisticsRepository) -> GetDeliveryStatusQuery:
        return GetDeliveryStatusQuery(repo=repo)

    # --- Workflows ---
    @provide
    def provide_fulfillment_workflow(
        self, 
        create_uc: CreateOrderUseCase,
        add_item_uc: AddOrderItemUseCase,
        assemble_uc: AssembleOrderUseCase,
        match_uc: MatchOrdersUseCase
    ) -> FulfillmentWorkflow:
        return FulfillmentWorkflow(
            create_uc=create_uc,
            add_item_uc=add_item_uc,
            assemble_uc=assemble_uc,
            match_uc=match_uc
        )

    # --- Handlers ---
    @provide
    def provide_order_handler(self, uc: MatchOrdersUseCase) -> OnOrderCreatedHandler:
        return OnOrderCreatedHandler(match_orders_uc=uc)
---